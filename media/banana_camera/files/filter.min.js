var BananaFilter=function(){var n=$("#filterBox .iconBox .item"),p=$("#uploadImgBackUp"),q=$("#uploadImg");return{init:function(){n.on("click",function(){var c=$(this).attr("data-idx");n.removeClass("active");$(this).addClass("active");var l=$("canvas",p)[0],a=l.getContext("2d").getImageData(0,0,l.width,l.height);switch(c){case "1":for(c=0;c<a.width;c++)for(var d=0;d<a.height;d++){var b=4*(c+d*a.width),e=.299*a.data[b+0]+.587*a.data[b+1]+.114*a.data[b+2];a.data[b+0]=e;a.data[b+1]=e;a.data[b+2]=e}break;
case "2":for(c=0;c<a.width;c++)for(d=0;d<a.height;d++){var b=4*(c+d*a.width),e=Math.floor(10*Math.random())%3,e=4*(c+e+(d+e)*a.width),h=a.data[e+1],f=a.data[e+2];a.data[b+0]=a.data[e+0];a.data[b+1]=h;a.data[b+2]=f}break;case "3":for(c=0;c<a.width;c++)for(d=0;d<a.height;d++){var b=4*(c+d*a.width),f=a.data[b+0],g=a.data[b+1],k=a.data[b+2],e=Math.abs(g-f+g+k)*f/256,h=Math.abs(k-f+g+k)*f/256,f=Math.abs(k-f+g+k)*g/256;a.data[b+0]=e;a.data[b+1]=h;a.data[b+2]=f}break;case "4":for(c=0;c<a.width;c++)for(d=
0;d<a.height;d++){var b=4*(c+d*a.width),m=a.data[b+0],g=a.data[b+1],e=a.data[b+2],r=.393*m+.769*g+.189*e,k=.349*m+.686*g+.168*e,h=.272*m+.534*g+.131*e,f=.5*Math.random()+.5,m=f*r+(1-f)*m,f=.5*Math.random()+.5,g=f*k+(1-f)*g,f=.5*Math.random()+.5,e=f*h+(1-f)*e;a.data[b+0]=m;a.data[b+1]=g;a.data[b+2]=e}break;case "5":for(c=0;c<a.width;c++)for(d=0;d<a.height;d++)b=4*(c+d*a.width),e=255-a.data[b+1],h=255-a.data[b+2],a.data[b+0]=255-a.data[b+0],a.data[b+1]=e,a.data[b+2]=h;break;case "6":for(c=0;c<a.width;c++)for(d=
0;d<a.height;d++)b=4*(c+d*a.width),fr=300<=a.data[b+0]+a.data[b+1]+a.data[b+2]?fg=fb=255:fg=fb=0,a.data[b+0]=fr,a.data[b+1]=fg,a.data[b+2]=fb;break;case "7":for(c=0;c<a.width;c++)for(d=0;d<a.height;d++)b=4*(c+d*a.width),e=4*(c+(d+1)*a.width),e=.299*(a.data[e+0]-a.data[b+0]+128)+.587*(a.data[e+1]-a.data[b+1]+128)+.114*(a.data[e+2]-a.data[b+2]+128),a.data[b+0]=e,a.data[b+1]=e,a.data[b+2]=e;break;case "8":for(c=0;c<a.width;c++)for(d=0;d<a.height;d++)b=4*(c+d*a.width),e=a.data[b+0],h=a.data[b+1],f=a.data[b+
2],g=128*h/(e+f+1),k=128*f/(h+e+1),a.data[b+0]=128*e/(h+f+1),a.data[b+1]=g,a.data[b+2]=k;break;case "9":for(c=0;c<a.width;c++)for(d=0;d<a.height;d++)b=4*(c+d*a.width),e=a.data[b+0],h=a.data[b+1],f=a.data[b+2],g=3*(h-e-f)/2,k=3*(f-h-e)/2,a.data[b+0]=3*(e-h-f)/2,a.data[b+1]=g,a.data[b+2]=k}c=document.createElement("canvas");c.width=l.width;c.height=l.height;c.getContext("2d").putImageData(a,0,0);l=c.toDataURL("image/png");q.attr("src",l)})},clearFilter:function(){n.removeClass("active");n.eq(0).addClass("active")}}}();